# 智能巡检管理系统

基于FinClip平台的小程序应用，用于工业设备智能巡检管理。

## 系统概述

智能巡检管理系统是一款专为工业设备巡检场景设计的移动应用，通过移动设备实现设备状态监测、数据采集、任务管理等功能。系统支持离线工作模式，适用于网络条件不稳定的工业现场环境。

## 快速入门指南

本指南将帮助新用户快速上手智能巡检管理系统，从环境准备到完成第一个巡检任务。即使您没有编程基础，也能按照以下步骤轻松完成系统的安装和使用。

### 第一步：环境准备

1. **安装Node.js环境**
   - 访问 [Node.js官网](https://nodejs.org/) 下载并安装最新的LTS版本（长期支持版）
   - 安装过程中保持默认选项即可，无需更改任何设置
   - 安装完成后，按下键盘上的`Win + R`组合键，输入`cmd`并回车打开命令提示符
   - 在命令提示符窗口中输入 `node -v` 和 `npm -v` 并回车，如果显示版本号（如`v16.15.0`和`8.5.5`）则表示安装成功

2. **安装Taro CLI工具**
   - 在命令提示符窗口中输入以下命令并回车：
   ```bash
   npm install -g @tarojs/cli@3.6.8
   ```
   - 等待安装完成，可能需要几分钟时间
   - 安装完成后，输入 `taro -v` 并回车，如果显示版本号则表示安装成功

3. **获取项目代码**
   - 如果您使用Git：
   ```bash
   git clone https://github.com/your-organization/inspection-system.git
   cd inspection-system
   ```
   - 如果您直接下载压缩包：
     1. 下载项目压缩包并解压到本地文件夹
     2. 在命令提示符中，使用`cd`命令进入解压后的项目文件夹
     ```bash
     cd 解压后的文件夹路径
     ```

### 第二步：项目配置

1. **安装项目依赖**
   - 在项目文件夹中，运行以下命令安装所有必要的依赖：
   ```bash
   npm install
   ```
   - 此过程可能需要5-10分钟，取决于您的网络速度
   - 如果安装过程中出现错误，可以尝试使用以下命令：
   ```bash
   npm install --legacy-peer-deps
   ```

2. **配置API地址**
   - 使用文本编辑器（如记事本、VS Code等）打开 `src/config/index.js` 文件
   - 找到 `API_BASE_URL` 变量，将其值修改为您的API服务器地址
   ```javascript
   // 修改前
   export const API_BASE_URL = 'https://api.inspection-system.com/v1';
   
   // 修改后（示例）
   export const API_BASE_URL = 'https://your-api-server.com/v1';
   ```
   - 如果您是在本地测试，可以保持默认配置
   - 其他可配置项说明：
     - `REQUEST_TIMEOUT`：API请求超时时间（毫秒）
     - `MAX_UPLOAD_SIZE`：上传文件的最大大小（MB）
     - `OCR_CONFIG`：OCR识别相关配置
     - `STORAGE_KEYS`：本地存储键名

### 第三步：启动开发环境

1. **启动FinClip小程序开发环境**
   - 在项目文件夹中，运行以下命令启动开发服务器：
   ```bash
   npm run dev:finclip
   ```
   - 成功启动后，命令行窗口会显示编译信息和「编译成功」的提示
   - 保持此命令行窗口开启状态，不要关闭

2. **安装并配置FinClip开发者工具**
   - 访问 [FinClip开发者中心](https://www.finclip.com/developer/) 下载并安装FinClip开发者工具
   - 安装完成后，打开FinClip开发者工具
   - 点击「导入项目」按钮
   - 在弹出的窗口中，选择项目目录（即您解压或克隆的项目文件夹）
   - 点击「确定」按钮导入项目
   - 导入成功后，点击工具右上角的「预览」按钮，即可在开发者工具中查看小程序效果
   - 如需在真机上预览，可点击「真机预览」按钮，使用FinClip App扫描二维码

### 第四步：创建第一个巡检任务

1. **登录系统**
   - 在小程序首页，点击「登录」按钮
   - 输入默认管理员账号和密码：
     - 账号：`admin`
     - 密码：`admin123`
   - 首次登录会提示修改密码，请设置一个安全的新密码并牢记
   - 登录成功后，您将看到系统主界面，包含各功能模块入口

2. **创建巡检表单模板**
   - 在主界面中，点击「表单引擎」模块图标
   - 在表单引擎页面，点击右下角的「+」或「新建模板」按钮
   - 在模板编辑页面：
     - 输入表单名称，如「日常设备巡检表」
     - 从左侧控件列表中，拖拽所需控件到中间的表单设计区
     - 常用控件包括：文本输入框、单选/多选、下拉选择、图片上传等
     - 点击已添加的控件，在右侧可以设置控件属性，如标题、是否必填、默认值等
     - 完成设计后，点击右上角「保存」按钮

3. **创建巡检任务**
   - 返回主界面，点击「任务管理」模块图标
   - 在任务管理页面，点击右下角的「+」或「新建任务」按钮
   - 在任务创建页面：
     - 输入任务名称，如「1号车间设备日检」
     - 选择刚才创建的表单模板
     - 设置任务执行人员（可多选）
     - 设置任务截止时间
     - 设置任务优先级（可选）
     - 添加任务描述（可选）
     - 点击「发布任务」按钮

4. **执行巡检任务**
   - 如需测试任务执行，可切换到执行人员账号登录
     - 点击右上角的「个人中心」图标
     - 点击「退出登录」
     - 使用执行人员的账号重新登录
   - 登录后，在首页的「待办任务」区域可以看到刚才创建的巡检任务
   - 点击任务卡片，进入任务详情页
   - 点击「开始执行」按钮，进入表单填写页面
   - 按照表单要求填写各项巡检数据
     - 文本类数据直接输入
     - 选择类数据点击选项
     - 图片类数据点击上传按钮拍照或从相册选择
   - 所有必填项填写完成后，点击底部「提交」按钮
   - 提交成功后，系统会显示提交成功提示，任务状态变为「已完成」

## 功能模块详解

### 动态表单引擎

- **支持自定义表单设计和数据采集**
  - 通过拖拽方式设计表单，无需编程知识
  - 支持表单逻辑设置，如字段联动、条件显示等
  - 提供表单预览功能，实时查看表单效果

- **多种表单控件**
  - 文本输入：单行文本、多行文本、数字、电话、邮箱等
  - 选择类型：单选、多选、下拉选择、日期选择等
  - 媒体类型：图片上传、音频录制、视频录制等
  - 特殊控件：签名、条码/二维码扫描、位置信息等

- **表单模板管理**
  - 创建：设计新的表单模板并保存
  - 编辑：修改现有表单模板的结构和属性
  - 复制：基于现有模板快速创建新模板
  - 删除：移除不再使用的表单模板
  - 分类：按设备类型、巡检类型等对模板进行分类

- **表单数据存储与导出**
  - 支持离线存储：在无网络环境下保存表单数据
  - 在线同步：网络恢复后自动上传数据
  - 数据导出：支持Excel、PDF、CSV等多种格式导出
  - 数据统计：提供基础的数据统计和分析功能

### OCR智能识别

- **设备铭牌识别**
  - 自动提取设备型号、序列号、制造日期等信息
  - 支持多种设备铭牌格式和布局
  - 识别结果可直接填入表单相应字段

- **仪表读数识别**
  - 自动识别指针式仪表的指针位置和读数
  - 支持数字式仪表的数字识别
  - 适用于压力表、温度计、电流表等常见仪表
  - 识别精度达95%以上，大幅提高数据采集效率

- **安全标识识别**
  - 识别安全警示标识和操作提示
  - 自动判断安全标识是否完整、清晰
  - 支持常见工业安全标识的分类和识别

- **证书文档识别**
  - 识别设备证书、检验报告等文档
  - 自动提取证书编号、有效期等关键信息
  - 支持多种证书格式，包括特种设备证书、计量证书等

### 任务管理系统

- **任务创建与分配**
  - 支持单个创建和批量导入创建任务
  - 智能分配：根据人员位置、专业、工作量自动分配任务
  - 支持定时任务：设置周期性巡检计划
  - 任务模板：保存常用任务配置为模板

- **任务状态跟踪**
  - 实时监控任务执行状态：未开始、进行中、已完成、已超时
  - 进度统计：按部门、人员、设备类型等维度统计任务完成情况
  - 任务提醒：自动发送任务开始、即将超时等提醒通知

- **任务优先级管理**
  - 支持紧急、高、中、低四级优先级
  - 优先级自动提升：临近截止日期时自动提升优先级
  - 优先级标识：在任务列表中用不同颜色标识优先级

- **任务执行报告**
  - 自动生成巡检报告：汇总巡检数据和发现的问题
  - 异常记录：标记并跟踪设备异常情况
  - 报告分享：支持报告导出和分享给相关人员
  - 历史查询：查看历史巡检记录和趋势分析

### 传感器数据采集

- **振动数据采集**
  - 利用移动设备加速度传感器采集设备振动数据
  - 支持三轴振动数据记录和分析
  - 振动频谱分析：识别异常振动频率
  - 数据对比：与历史数据或标准值进行对比

- **温度数据采集**
  - 通过外接传感器或红外测温采集温度数据
  - 支持多点温度采集和热图生成
  - 温度趋势分析：记录温度变化趋势
  - 温度异常报警：超出阈值自动报警

- **噪声数据采集**
  - 利用移动设备麦克风采集
